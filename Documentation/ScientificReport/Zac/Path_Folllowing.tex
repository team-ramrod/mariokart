\section{Path Following}
Once the kart had located a marker a method for following the marker had to be implemented. The simplest solution of driving towards the marker had many drawbacks. An example would be that if the kart was following the marker and the marker moved forwards, then after a few meters turned to the right. The following kart would cut the corner and potentially smash straight into an obstacle. A second problem would be that if the marker left the kart’s field of vision the kart would be forced to immediately come to a stop as it no longer had a location to drive towards.

To solve these problems an algorithm was developed that would attempt to follow the path the kart had taken. This algorithm utilized the marker position given by the computer vision and combined it with information from the kart’s speed sensor and the position of the steering wheel. The program used the kart’s sensors and the time at which each reading was taken to calculate an estimate for its absolute position and orientation. Once the location of the kart had been found the relative position and orientation of the chessboard marker if present was also recorded. After this had been done the absolute position of the marker was calculated. The current and all previous positions were stored in an array.

Armed with these absolute position estimates the core of the path following algorithm was very simple and executed as follows. 
\begin{enumerate}
\item The kart would select the first point on the path
\item The kart would set the steering to point at the point and drive towards it
\item When the kart came within a minimum distance of the line (set to the turning radius of the kart)  or the point became too "old" the kart would deem itself to have reached the point
\item The kart would then repeat the process for the next point
\end{enumerate}

By setting the criteria for meeting the point to the turning radius of the kart this meant that the kart would always be able to turn to be within this distance  of the next point regardless of where it lay. The kart skipping a point if it became older then a set value (in testing set to 10 seconds) meant that if the kart began to lag behind the object it was tracking it would start cutting corners in order to catch up to the target. This meant that if the target was slowly moving through tight turns the system would work on matching its path and when the target was moving quickly the system would priorities keeping up with the target. The time limit also helped to remove oscillations that could be set up when the kart was following a line.

The method used to estimate the absolute position was prone to compounding errors. This problem was slightly mitigated in that error could be present in the position of the kart as long as the same error was present in the recorded positions of the marker. This meant that the only error that would matter would be that introduced in the time between the marker being recorded at a point and the kart reaching that point. This meant when the kart was closely following a marker the time over which error could compound would be limited to a few seconds. In most environments the kart might navigate an error of the order of a meter could be acceptable. This meant that the position estimation could be very crude and still produce reasonable tracking.